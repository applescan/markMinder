(()=>{"use strict";function e(e){e.preventDefault();const n=e.target.bookmarkName.value.trim(),o=e.target.bookmarkUrl.value.trim(),r=document.getElementById("name-error"),i=document.getElementById("url-error");r.textContent="",i.textContent="";let c=!1;if(n||(r.textContent="Please enter a valid name.",c=!0),t(o)||(i.textContent="Please enter a valid URL.",c=!0),c)return;const l={id:Date.now(),name:n,url:o};!function(e){a.push(e);try{localStorage.setItem("bookmarks",JSON.stringify(a))}catch(e){console.error("Failed to save bookmarks:",e)}m()}(l);try{localStorage.setItem("lastSubmittedBookmark",JSON.stringify(l))}catch(e){console.error("Failed to save the last submitted bookmark:",e)}window.location.href="/result.html"}function t(e){try{return new URL(e),!0}catch(e){return!1}}function n(e,n,o){const r=document.getElementById("card-template").content.cloneNode(!0);r.querySelector(".title.is-6").innerText=e;const i=r.querySelector(".url");i.href=n,i.innerText=n;const c=r.querySelector("#edit"),l=r.querySelector("#delete");return c.addEventListener("click",(()=>function(e){const n=a.findIndex((t=>t.id===e)),o=a[n],r=prompt("Enter new bookmark name:",o.name),i=prompt("Enter new bookmark URL:",o.url);t(i)?r&&i&&(a[n]={name:r,url:i},localStorage.setItem("bookmarks",JSON.stringify(a)),m()):alert("Please enter a valid URL.")}(o))),l.addEventListener("click",(()=>function(e){if(confirm("Are you sure you want to delete this bookmark?")){const t=a.findIndex((t=>t.id===e));a.splice(t,1),localStorage.setItem("bookmarks",JSON.stringify(a)),m()}}(o))),r.firstElementChild}let o=1,r="";const a=JSON.parse(localStorage.getItem("bookmarks"))||[],i=20,c=l(a?a.length:0);function l(e){return Math.ceil(e/i)}function d(){const e="dark"===document.documentElement.getAttribute("data-theme"),t=document.getElementById("theme-icon").querySelector("i");document.documentElement.setAttribute("data-theme",e?"light":"dark"),t.className=e?"fas fa-moon":"fas fa-sun"}function s(e){let t=a;if(r&&(t=a.filter((e=>e.name.toLowerCase().includes(r)))),0===t.length){const e=0===a.length?"<p>No bookmarks available.</p>":"<p>No bookmarks match your search.</p>";return document.getElementById("bookmark-list").innerHTML=e,void h(1)}e<1?e=1:e>l(a.length)&&(e=l(a.length)),o=e;const c=document.getElementById("bookmark-list");c.innerHTML="";const d=(o-1)*i,s=Math.min(d+i,a.length);for(let e=d;e<s;e++)if(t[e]){const o=n(t[e].name,t[e].url,t[e].id);c.appendChild(o)}h(o)}function m(){s(o)}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.getElementById("theme-icon").querySelector("i"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",t?"dark":"light"),e.className=t?"fas fa-sun":"fas fa-moon",document.getElementById("theme-icon").addEventListener("click",d)}(),document.getElementById("bookmark-form").addEventListener("submit",e),m()}));let u=1;const f=document.getElementById("pagination-next"),k=document.getElementById("pagination-previous");function g(e){u="next"===e?Math.min(u+1,c):Math.max(u-1,1),s(u)}function h(e){y(f,e>=c||c<=1),y(k,e<=1);const t=document.querySelector(".pagination-list");if(t.innerHTML="",!(c<=1))for(let n=1;n<=c;n++){const o=document.createElement("li"),r=E(n,e);o.appendChild(r),t.appendChild(o)}}function y(e,t){e.style.visibility=t?"hidden":"visible"}function E(e,t){const n=document.createElement("a");return n.className="pagination-link",n.href=`#page${e}`,n.textContent=e,n.onclick=()=>s(e),e===t&&n.classList.add("is-current"),n}window.onload=()=>{f&&k&&(f.addEventListener("click",(()=>g("next"))),k.addEventListener("click",(()=>g("prev")))),m()},document.getElementById("sort-a-z").addEventListener("click",(()=>{!function(e){const t=document.getElementById("sort-a-z");"asc"===e?(t.innerHTML="Sort Alphabetically Z-A",window.currentSortOrder="desc"):(t.innerHTML="Sort Alphabetically A-Z",window.currentSortOrder="asc"),a.sort(((t,n)=>{const o=t.name.toUpperCase(),r=n.name.toUpperCase();return"asc"===e?o>r?1:r>o?-1:0:o>r?-1:r>o?1:0})),m()}(window.currentSortOrder||"asc")})),document.getElementById("order").addEventListener("click",(function(){a.reverse();const e=document.querySelector(".order_text");"Order by earliest to latest"===e.innerHTML?e.innerHTML="Order by latest to earliest":e.innerHTML="Order by earliest to latest",m()})),document.getElementById("search").addEventListener("input",(function(){const e=document.getElementById("search").value.trim().toLowerCase();r=e,m()})),document.getElementById("theme-toggle").addEventListener("click",d)})();