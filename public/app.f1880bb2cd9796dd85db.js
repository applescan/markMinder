(()=>{"use strict";function e(e){e.preventDefault();const n=e.target.bookmarkName.value.trim(),o=e.target.bookmarkUrl.value.trim(),r=document.getElementById("name-error"),i=document.getElementById("url-error");r.textContent="",i.textContent="";let c=!1;if(n||(r.textContent="Please enter a valid name.",c=!0),t(o)||(i.textContent="Please enter a valid URL.",c=!0),c)return;const l={id:Date.now(),name:n,url:o};!function(e){a.push(e);try{localStorage.setItem("bookmarks",JSON.stringify(a))}catch(e){console.error("Failed to save bookmarks:",e)}d()}(l);try{localStorage.setItem("lastSubmittedBookmark",JSON.stringify(l))}catch(e){console.error("Failed to save the last submitted bookmark:",e)}window.location.href="/result.html"}function t(e){try{return new URL(e),!0}catch(e){return!1}}function n(e,n,o){const r=document.getElementById("card-template").content.cloneNode(!0);r.querySelector(".title.is-6").innerText=e;const i=r.querySelector(".url");i.href=n,i.innerText=n;const c=r.querySelector("#edit"),l=r.querySelector("#delete");return c.addEventListener("click",(()=>function(e){const n=a.findIndex((t=>t.id===e)),o=a[n],r=prompt("Enter new bookmark name:",o.name),i=prompt("Enter new bookmark URL:",o.url);t(i)?r&&i&&(a[n]={name:r,url:i},localStorage.setItem("bookmarks",JSON.stringify(a)),d()):alert("Please enter a valid URL.")}(o))),l.addEventListener("click",(()=>function(e){if(confirm("Are you sure you want to delete this bookmark?")){const t=a.findIndex((t=>t.id===e));a.splice(t,1),localStorage.setItem("bookmarks",JSON.stringify(a)),d()}}(o))),r.firstElementChild}let o=1,r="";const a=JSON.parse(localStorage.getItem("bookmarks"))||[],i=20;function c(){const e="dark"===document.documentElement.getAttribute("data-theme"),t=document.getElementById("theme-icon").querySelector("i");document.documentElement.setAttribute("data-theme",e?"light":"dark"),t.className=e?"fas fa-moon":"fas fa-sun"}function l(e){let t=a;if(r&&(t=a.filter((e=>e.name.toLowerCase().includes(r)))),0===t.length){const e=0===a.length?"<p>No bookmarks available.</p>":"<p>No bookmarks match your search.</p>";return document.getElementById("bookmark-list").innerHTML=e,void g(1,0)}e<1?e=1:e>m(a.length)&&(e=m(a.length)),o=e;const c=document.getElementById("bookmark-list");c.innerHTML="";const l=(o-1)*i,d=Math.min(l+i,a.length);for(let e=l;e<d;e++)if(t[e]){const o=n(t[e].name,t[e].url,t[e].id);c.appendChild(o)}g(o,t.length)}function d(){l(o)}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.getElementById("theme-icon").querySelector("i"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",t?"dark":"light"),e.className=t?"fas fa-sun":"fas fa-moon",document.getElementById("theme-icon").addEventListener("click",c)}(),document.getElementById("bookmark-form").addEventListener("submit",e),d()}));let s=1;function m(e){return Math.ceil(e/i)}function u(e){const t=m(a.length);s="next"===e?Math.min(s+1,t):Math.max(s-1,1),l(s)}function g(e,t){const n=document.getElementById("pagination-next"),o=document.getElementById("pagination-previous"),r=m(t);f(n,e>=r||r<=1),f(o,e<=1);const a=document.querySelector(".pagination-list");if(a.innerHTML="",!(r<=1))for(let t=1;t<=r;t++){const n=document.createElement("li"),o=k(t,e);n.appendChild(o),a.appendChild(n)}}function f(e,t){e.style.visibility=t?"hidden":"visible"}function k(e,t){const n=document.createElement("a");return n.className="pagination-link",n.href=`#page${e}`,n.textContent=e,n.onclick=()=>l(e),e===t&&n.classList.add("is-current"),n}window.onload=()=>{!function(){const e=document.getElementById("pagination-next"),t=document.getElementById("pagination-previous");e&&t&&(e.addEventListener("click",(()=>u("next"))),t.addEventListener("click",(()=>u("prev"))))}(),d()},document.getElementById("sort-a-z").addEventListener("click",(()=>{!function(e){const t=document.getElementById("sort-a-z");"asc"===e?(t.innerHTML="Sort Alphabetically Z-A",window.currentSortOrder="desc"):(t.innerHTML="Sort Alphabetically A-Z",window.currentSortOrder="asc"),a.sort(((t,n)=>{const o=t.name.toUpperCase(),r=n.name.toUpperCase();return"asc"===e?o>r?1:r>o?-1:0:o>r?-1:r>o?1:0})),d()}(window.currentSortOrder||"asc")})),document.getElementById("order").addEventListener("click",(function(){a.reverse();const e=document.querySelector(".order_text");"Order by earliest to latest"===e.innerHTML?e.innerHTML="Order by latest to earliest":e.innerHTML="Order by earliest to latest",d()})),document.getElementById("search").addEventListener("input",(function(){const e=document.getElementById("search").value.trim().toLowerCase();r=e,d()})),document.getElementById("theme-toggle").addEventListener("click",c)})();