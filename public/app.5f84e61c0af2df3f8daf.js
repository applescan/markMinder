(()=>{"use strict";const e=document.getElementById("pagination-next"),t=document.getElementById("pagination-previous");function n(e,t){h(t="next"===e?Math.min(t+1,f):Math.max(t-1,1))}function o(n){r(e,n>=f||f<=1),r(t,n<=1);const o=document.querySelector(".pagination-list");if(o.innerHTML="",!(f<=1))for(let e=1;e<=f;e++){const t=document.createElement("li"),r=a(e,n);t.appendChild(r),o.appendChild(t)}}function r(e,t){e.style.visibility=t?"hidden":"visible"}function a(e,t){const n=document.createElement("a");return n.className="pagination-link",n.href=`#page${e}`,n.textContent=e,n.onclick=()=>h(e),e===t&&n.classList.add("is-current"),n}function i(e){e.preventDefault();const t=e.target.bookmarkName.value.trim(),n=e.target.bookmarkUrl.value.trim(),o=document.getElementById("name-error"),r=document.getElementById("url-error");o.textContent="",r.textContent="";let a=!1;if(t||(o.textContent="Please enter a valid name.",a=!0),c(n)||(r.textContent="Please enter a valid URL.",a=!0),a)return;const i={id:Date.now(),name:t,url:n};!function(e){m.push(e);try{localStorage.setItem("bookmarks",JSON.stringify(m))}catch(e){console.error("Failed to save bookmarks:",e)}y()}(i);try{localStorage.setItem("lastSubmittedBookmark",JSON.stringify(i))}catch(e){console.error("Failed to save the last submitted bookmark:",e)}window.location.href="/result.html"}function c(e){try{return new URL(e),!0}catch(e){return!1}}function l(e,t,n){const o=document.getElementById("card-template").content.cloneNode(!0);o.querySelector(".title.is-6").innerText=e;const r=o.querySelector(".url");r.href=t,r.innerText=t;const a=o.querySelector("#edit"),i=o.querySelector("#delete");return a.addEventListener("click",(()=>function(e){const t=m.findIndex((t=>t.id===e)),n=m[t],o=prompt("Enter new bookmark name:",n.name),r=prompt("Enter new bookmark URL:",n.url);c(r)?o&&r&&(m[t]={name:o,url:r},localStorage.setItem("bookmarks",JSON.stringify(m)),y()):alert("Please enter a valid URL.")}(n))),i.addEventListener("click",(()=>function(e){if(confirm("Are you sure you want to delete this bookmark?")){const t=m.findIndex((t=>t.id===e));m.splice(t,1),localStorage.setItem("bookmarks",JSON.stringify(m)),y()}}(n))),o.firstElementChild}let d=1,s="";const m=JSON.parse(localStorage.getItem("bookmarks"))||[],u=20,f=k(m?m.length:0);function k(e){return Math.ceil(e/u)}function g(){const e="dark"===document.documentElement.getAttribute("data-theme"),t=document.getElementById("theme-icon").querySelector("i");document.documentElement.setAttribute("data-theme",e?"light":"dark"),t.className=e?"fas fa-moon":"fas fa-sun"}function h(e){let t=m;if(s&&(t=m.filter((e=>e.name.toLowerCase().includes(s)))),0===t.length){const e=0===m.length?"<p>No bookmarks available.</p>":"<p>No bookmarks match your search.</p>";return document.getElementById("bookmark-list").innerHTML=e,void o(1)}e<1?e=1:e>k(m.length)&&(e=k(m.length)),d=e;const n=document.getElementById("bookmark-list");n.innerHTML="";const r=(d-1)*u,a=Math.min(r+u,m.length);for(let e=r;e<a;e++)if(t[e]){const o=l(t[e].name,t[e].url,t[e].id);n.appendChild(o)}o(d)}function y(){h(d)}window.onload=()=>{!function(o){e&&t&&(e.addEventListener("click",(()=>n("next",o))),t.addEventListener("click",(()=>n("prev",o))))}(d),y()},document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.getElementById("theme-icon").querySelector("i"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",t?"dark":"light"),e.className=t?"fas fa-sun":"fas fa-moon",document.getElementById("theme-icon").addEventListener("click",g)}(),document.getElementById("bookmark-form").addEventListener("submit",i),y()})),document.getElementById("sort-a-z").addEventListener("click",(()=>{!function(e){const t=document.getElementById("sort-a-z");"asc"===e?(t.innerHTML="Sort Alphabetically Z-A",window.currentSortOrder="desc"):(t.innerHTML="Sort Alphabetically A-Z",window.currentSortOrder="asc"),m.sort(((t,n)=>{const o=t.name.toUpperCase(),r=n.name.toUpperCase();return"asc"===e?o>r?1:r>o?-1:0:o>r?-1:r>o?1:0})),y()}(window.currentSortOrder||"asc")})),document.getElementById("order").addEventListener("click",(function(){m.reverse();const e=document.querySelector(".order_text");"Order by earliest to latest"===e.innerHTML?e.innerHTML="Order by latest to earliest":e.innerHTML="Order by earliest to latest",y()})),document.getElementById("search").addEventListener("input",(function(){const e=document.getElementById("search").value.trim().toLowerCase();s=e,y()})),document.getElementById("theme-toggle").addEventListener("click",g)})();